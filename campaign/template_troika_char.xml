<?xml version="1.0" encoding="iso-8859-1"?>

<root>
	<template name="list_char_possession">
		<windowlist>
			<class>char_possession</class>
			<datasource>.possessionlist</datasource>
			<columns width="222" filldown="true" />
			<allowcreate />
			<allowdelete />
			<sortby><field>label</field></sortby>
			<script>
				function onListChanged()
					update();
				end

				function update()
					local sEdit = getName() .. "_iedit";
					if window[sEdit] then
						local bEdit = (window[sEdit].getValue() == 1);
						for _,wCategory in ipairs(getWindows()) do
							wCategory.idelete.setVisibility(bEdit);
							wCategory.attributes_iadd.setVisible(bEdit);
							wCategory.attributes.update(bEdit);
						end
					end
				end

				function addEntry(bFocus)
					local w = createWindow();
					if bFocus then
						w.header.subwindow.label.setFocus();
					end
					return w;
				end
			</script>
		</windowlist>
	</template>

</root>