<?xml version="1.0" encoding="iso-8859-1"?>

<root>
    <windowclass name="combat_actor">
		<script file="campaign/scripts/combat_actor.lua" />
		<frame>frame_single_pixel</frame>
		<sizelimits>
			<dynamic />
		</sizelimits>

		<sheetdata>
			<TypeLayout/>

			<LayoutBeginHorizontal name ="8"/>
				<viewer_button_open/>

				<layout_stringcontrol name="l0"><static text="Actor:" /></layout_stringcontrol>
				<layout_stringfield name="name" ><!--disabled /--></layout_stringfield>
				<layout_stringcontrol name="l1"><static text="Initiative:" /></layout_stringcontrol>
				<layout_numberfield name="initiative_cur" ><!--disabled /--></layout_numberfield>
				<layout_stringcontrol name="l2"><static text="/" /></layout_stringcontrol>
				<layout_numberfield name="initiative_max" ><!--disabled /--></layout_numberfield>
            <LayoutEnd/>
            <layout_stringfield name="link_window" ><invisible/></layout_stringfield>
            <layout_stringfield name="link_db_ref" ><invisible/></layout_stringfield>

        </sheetdata>

    </windowclass>

    <windowclass name="combat_turn">
		<script file="campaign/scripts/combat_turn.lua" />
		<frame>frame_single_pixel</frame>
		<sizelimits>
			<dynamic />
		</sizelimits>

		<sheetdata>
			<TypeLayout/>

			<LayoutBeginHorizontal name ="8"/>
				<layout_stringcontrol name="l0"><static text="Actor:" /></layout_stringcontrol>
				<layout_stringfield name="name" ><!--disabled /--></layout_stringfield>
				<layout_stringcontrol name="l1"><static text="Acton:" /></layout_stringcontrol>
				<layout_stringfield name="action" ><!--disabled /--></layout_stringfield>
            <LayoutEnd/>
            <layout_numberfield name="turn_number"><invisible/></layout_numberfield>
            <layout_stringfield name="link_window" ><invisible/></layout_stringfield>
            <layout_stringfield name="link_db_ref" ><invisible/></layout_stringfield>
        </sheetdata>
    </windowclass>

    <windowclass name="combat_commands">
        <script>
            function onInit()
                TypeLayout.setup()
            end

            function onFirstLayout()
                TypeLayout.doAdjustLayout()
            end
        </script>
        <frame>frame_single_pixel</frame>
        <sizelimits>
            <dynamic/>
        </sizelimits>
        <sheetdata>
			<TypeLayout/>

			<LayoutBeginHorizontal name ="8"/>
                <layout_buttoncontrol name="bttn_next_round">
                    <script>
                        function onButtonPress()
                            return window.parentcontrol.window.cmdRoundNext()
                        end
                    </script>
                    <frame>frame_single_pixel</frame>
                    <text>Next Round</text>
                    <anchored>
                        <size>
                            <width>80</width>
                            <height>20</height>
                        </size>
                    </anchored>
                </layout_buttoncontrol>
				<layout_buttoncontrol name="bttn_next_turn">
                    <script>
                        function onButtonPress()
                            return window.parentcontrol.window.cmdTurnNext()
                        end
                    </script>
                    <frame>frame_single_pixel</frame>
                    <text>Next Turn</text>
                    <anchored>
                        <size>
                            <width>80</width>
                            <height>20</height>
                        </size>
                    </anchored>
                </layout_buttoncontrol>
				<layout_buttoncontrol name="bttn_delay">
                    <script>
                        function onButtonPress()
                            return window.parentcontrol.window.cmdTurnDelay()
                        end
                    </script>
                    <frame>frame_single_pixel</frame>
                    <text>Delay...</text>
                    <anchored>
                        <size>
                            <width>80</width>
                            <height>20</height>
                        </size>
                    </anchored>
                </layout_buttoncontrol>
				<layout_buttoncontrol name="bttn_aim">
                    <script>
                        function onButtonPress()
                            return window.parentcontrol.window.cmdTurnAim()
                        end
                    </script>
                    <frame>frame_single_pixel</frame>
                    <text>AIM!</text>
                    <anchored>
                        <size>
                            <width>80</width>
                            <height>20</height>
                        </size>
                    </anchored>
                </layout_buttoncontrol>

            <LayoutEnd/>

        </sheetdata>
    </windowclass>

    <windowclass name="combat_fight">
		<script file="campaign/scripts/combat_fight.lua" />

		<frame>frame_troika_generic</frame>

		<sizelimits>
			<dynamic />
		</sizelimits>

		<nodelete />
		<softclose />

		<sheetdata>
            <windowlist name="combat_actor_list">
                <datasource>.actor</datasource>
                <class>combat_actor</class>
        		<frame>frame_single_pixel</frame>

                <sizelimits>
<!--                    <dynamic />-->
                </sizelimits>
                <anchored>
                    <top parent="" offset="24" />
                    <left parent="" offset="8" />
                    <right parent="" offset="-32" />
                    <size>
                        <height>200</height>
                    </size>
                </anchored>

                <allowcreate />
				<allowdelete />

                <columns width="400" filldown="true" />
                <sortby><control>actor</control></sortby>
                <filter><control>filter</control></filter>
                <filteron><control>name</control></filteron>
            </windowlist>

            <scrollbar name="combat_actor_list_sb">
                <anchored to="combat_actor_list" />
                <target>combat_actor_list</target>
                <normal name="frame_single_pixel"/>
            </scrollbar>

            <subwindow name="combat_commands">
                <class>combat_commands</class>
                <activate/>
                <fastinit/>
                <anchored>
                    <top parent="combat_actor_list" anchor="bottom" offset="8" />
                    <left parent="" offset="8" />
                    <right parent="" offset="-32" />
                    <size>
                        <height>20</height>
                    </size>
                </anchored>
            </subwindow>

            <windowlist name="combat_turn_list">
                <datasource>.round.id-00001.turn</datasource>
                <class>combat_turn</class>
        		<frame>frame_single_pixel</frame>

                <sizelimits>
                    <dynamic />
                </sizelimits>
                <anchored>
                    <top parent="combat_commands" anchor="bottom" offset="8" />
                    <left parent="" offset="8" />
                    <right parent="" offset="-32" />
                    <bottom parent="" anchor="bottom" offset="-8" />
                </anchored>

                <allowcreate />
				<allowdelete />

                <columns width="400" filldown="true" />
                <sortby><control>turn_number</control></sortby>
                <filter><control>filter</control></filter>
                <filteron><control>name</control></filteron>
            </windowlist>

            <scrollbar name="combat_turn_list_sb">
                <anchored to="combat_turn_list" />
                <target>combat_turn_list</target>
                <normal name="frame_single_pixel"/>
            </scrollbar>


			<close/>
			<resize/>

		</sheetdata>

    </windowclass>


<!--
    <windowclass name="character_viewer_element">
		<script file="campaign/scripts/character_viewer_element.lua" />

		<frame>frame_single_pixel</frame>

		<sizelimits>
			<dynamic />
        </sizelimits>

		<sheetdata>
			<TypeLayout/>

			<LayoutBeginHorizontal name ="8"/>
				<layout_buttoncontrol name="bttn_open">
					<icon normal="arrow_sm_left" />
					<anchored>
						<size>
						<width>16</width>
						<height>16</height>
						</size>
					</anchored>
					<script>
						function onButtonPress()
							window.elementOpen()
							return true
						end

						function onDragStart(button, x, y, drag_info)
							window.elementDrag(button, x, y, drag_info)
							return true
						end
					</script>
				</layout_buttoncontrol>

				<layout_stringcontrol name="l0"><static text="Name:" /></layout_stringcontrol>
				<layout_stringfield name="name" ><disabled /></layout_stringfield>

				<layout_stringcontrol name="l1"><static text="Skill:" /></layout_stringcontrol>
				<layout_numberfield name="skill"><disabled /></layout_numberfield>

				<layout_stringcontrol name="l2"><static text="Stamina:" /></layout_stringcontrol>
				<layout_numberfield name="stamina"><disabled /></layout_numberfield>

				<layout_stringcontrol name="l3"><static text="Luck:" /></layout_stringcontrol>
				<layout_numberfield name="luck"><disabled /></layout_numberfield>
			<LayoutEnd/>

		</sheetdata>
    </windowclass>

	<windowclass name="character_viewer">
		<script file="campaign/scripts/character_viewer.lua" />

		<frame>frame_troika_generic</frame>

		<sizelimits>
			<dynamic />
		</sizelimits>

		<nodelete />
		<softclose />

		<sheetdata>
			<windowlist name="list">
				<datasource>.</datasource>
				<class>character_viewer_element</class>

				<anchored position="below">
					<top parent="" offset="8" />
					<bottom parent="" offset="8" />
					<left parent="" offset="8" />
					<right parent="" offset="8" />
				</anchored>
				<allowcreate />
				<allowdelete />
				<columns width="400" filldown="true" />
				<sortby><control>name</control></sortby>
				<filter><control>filter</control></filter>
				<filteron><control>name</control></filteron>
			</windowlist>
			<scrollbar>
				<anchored to="list" />
				<target>list</target>
			</scrollbar>

			<close_charsheet />
			<resize_charsheet />

		</sheetdata>

	</windowclass>
-->
</root>